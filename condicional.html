<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Probabilidad Condicional</title>
  <script src="https://cdn.tailwindcss.com"></script>

  <script type="module">
    import { toNumber, pA_givenB, pB_givenA, isIndependent } from "./app.js?v=4";

    // Cálculo directo de P(A|B), P(B|A)
    window.calc = () => {
      const pA = toNumber(document.getElementById("pA").value);
      const pB = toNumber(document.getElementById("pB").value);
      const pAB = toNumber(document.getElementById("pAB").value);

      const pAgB = pA_givenB(pAB, pB);
      const pBgA = pB_givenA(pAB, pA);
      const indep = isIndependent(pA, pB, pAB) ? "Sí" : "No";

      document.getElementById("out").innerHTML = `
        <p><b>P(A|B)</b> = ${pAgB.toFixed(6)}</p>
        <p><b>P(B|A)</b> = ${pBgA.toFixed(6)}</p>
        <p><b>¿A y B independientes?</b> ${indep}</p>
      `;
    };

    // Cálculo desde tabla 2x2
    window.calcTabla = ()=>{
      const nAB = toNumber(document.getElementById("nAB").value);
      const nA_noB = toNumber(document.getElementById("nA_noB").value);
      const nNoA_B = toNumber(document.getElementById("nNoA_B").value);
      const nNoA_noB = toNumber(document.getElementById("nNoA_noB").value);
      const N = nAB + nA_noB + nNoA_B + nNoA_noB;

      const pA = (nAB + nA_noB)/N, pB = (nAB + nNoA_B)/N, pAB = nAB/N;
      const pAgB = pA_givenB(pAB, pB);
      const pBgA = pB_givenA(pAB, pA);

      document.getElementById("outTabla").innerHTML = `
        <p>N = ${N}</p>
        <p>P(A) = ${pA.toFixed(3)}, P(B) = ${pB.toFixed(3)}, P(A∩B) = ${pAB.toFixed(3)}</p>
        <p>P(A|B) = ${pAgB.toFixed(6)}, P(B|A) = ${pBgA.toFixed(6)}</p>
      `;
    };
  </script>
</head>

<body class="bg-gray-50 text-gray-800">
  <header class="bg-green-600 text-white">
    <div class="max-w-5xl mx-auto p-5">
      <h1 class="text-2xl md:text-3xl font-bold">Probabilidad Condicional y Dependencia</h1>
      <p>Aplicación del teorema P(A|B) y revisión de independencia.</p>
    </div>
  </header>

  <nav class="bg-white border-b">
    <div class="max-w-5xl mx-auto p-3 flex flex-wrap gap-2">
      <a class="px-3 py-2 rounded hover:bg-indigo-50" href="./index.html">Inicio</a>
      <a class="px-3 py-2 rounded hover:bg-indigo-50" href="./basicos.html">Conceptos básicos</a>
      <a class="px-3 py-2 rounded hover:bg-indigo-50" href="./bayes.html">Bayes</a>
      <a class="px-3 py-2 rounded hover:bg-indigo-50" href="./acerca.html">Acerca de</a>
    </div>
  </nav>

  <main class="max-w-5xl mx-auto p-6 grid md:grid-cols-2 gap-6">
    <!-- Sección 1: Teoría -->
    <section class="bg-white rounded-2xl shadow p-6">
      <h2 class="text-xl font-semibold mb-3">Teoría breve</h2>
      <ul class="list-disc pl-6 text-sm space-y-1">
        <li><b>P(A|B) = P(A∩B) / P(B)</b>, con P(B)>0</li>
        <li><b>P(B|A) = P(A∩B) / P(A)</b>, con P(A)>0</li>
        <li><b>Independencia:</b> P(A∩B) = P(A)P(B)</li>
      </ul>
    

    <!-- Sección 2: Cálculo directo -->
    <section class="bg-white rounded-2xl shadow p-6">
      <h2 class="text-xl font-semibold mb-3">Cálculo directo</h2>
      <div class="grid grid-cols-3 gap-3">
        <label class="text-sm">P(A)
          <input id="pA" type="number" step="0.01" value="0.3" class="w-full mt-1 border rounded p-2">
        </label>
        <label class="text-sm">P(B)
          <input id="pB" type="number" step="0.01" value="0.4" class="w-full mt-1 border rounded p-2">
        </label>
        <label class="text-sm">P(A∩B)
          <input id="pAB" type="number" step="0.01" value="0.12" class="w-full mt-1 border rounded p-2">
        </label>
      </div>
      <button onclick="calc()" class="mt-4 px-4 py-2 bg-indigo-600 text-white rounded-lg">Calcular</button>
      <div id="out" class="mt-4 text-sm"></div>
    

    <!-- Sección 3: Aplicación con tabla -->
    <section class="bg-white rounded-2xl shadow p-6 md:col-span-2">
      <h2 class="text-xl font-semibold mb-3">Aplicación con tabla (conteos)</h2>
      <p class="text-sm mb-3">Ingresa conteos:</p>
      <div class="grid grid-cols-4 gap-3">
        <label class="text-sm">A∩B
          <input id="nAB" type="number" value="30" class="w-full mt-1 border rounded p-2">
        </label>
        <label class="text-sm">A∩¬B
          <input id="nA_noB" type="number" value="20" class="w-full mt-1 border rounded p-2">
        </label>
        <label class="text-sm">¬A∩B
          <input id="nNoA_B" type="number" value="10" class="w-full mt-1 border rounded p-2">
        </label>
        <label class="text-sm">¬A∩¬B
          <input id="nNoA_noB" type="number" value="40" class="w-full mt-1 border rounded p-2">
        </label>
      </div>
      <button onclick="calcTabla()" class="mt-4 px-4 py-2 bg-indigo-600 text-white rounded-lg">Calcular desde tabla</button>
      <div id="outTabla" class="mt-4 text-sm"></div>
    
  </main>
</body>
<script type="module">
  import { toNumber, pA_givenB, pB_givenA } from "./app.js?v=5";

  window.calcTabla = ()=>{
    const nAB = toNumber(document.getElementById("nAB").value);
    const nA_noB = toNumber(document.getElementById("nA_noB").value);
    const nNoA_B = toNumber(document.getElementById("nNoA_B").value);
    const nNoA_noB = toNumber(document.getElementById("nNoA_noB").value);
    const N = nAB + nA_noB + nNoA_B + nNoA_noB;
    const pA = (nAB + nA_noB)/N, pB = (nAB + nNoA_B)/N, pAB = nAB/N;
    const pAgB = pA_givenB(pAB, pB);
    const pBgA = pB_givenA(pAB, pA);
    document.getElementById("outTabla").innerHTML =
      `<p>N=${N}. P(A)=${pA.toFixed(3)}, P(B)=${pB.toFixed(3)}, P(A∩B)=${pAB.toFixed(3)}</p>
       <p>P(A|B)=${pAgB.toFixed(6)}, P(B|A)=${pBgA.toFixed(6)}</p>`;
  };
</script>

</html>
